jenkins:
  agentProtocols:
  - "JNLP4-connect"
  - "Ping"

  clouds:
  - amazonEC2:
      cloudName: "aws-ec2-cloud"
      privateKey: {{  ec2_private_key_content | to_nice_yaml(indent=8) }}

      region: "ap-southeast-2"
      templates:
      - ami: "{{ slave_ami_id}}"
        amiType:
          unixData:
            sshPort: "22"
        associatePublicIp: false
        connectBySSHProcess: false
        connectionStrategy: PRIVATE_IP
        deleteRootOnTermination: false
        description: "Jenkins Slave Debian9 Type T2Micro"
        ebsOptimized: false
        iamInstanceProfile: "{{slave_instance_profile_arn}}"
        initScript: "mkdir /home/admin/tools"
        idleTerminationMinutes: "30"
        labelString: "ec2 docker debian debian9 micro T2Micro"
        maxTotalUses: -1
        mode: NORMAL
        monitoring: false
        numExecutors: 3
        remoteAdmin: "admin"
        remoteFS: "/home/admin"
        securityGroups: "{{  slave_security_group_name}}"
        stopOnTerminate: false
        subnetId: "{{ slave_subnet_id }}"
        t2Unlimited: false
        type: T2Micro
        useDedicatedTenancy: false
        useEphemeralDevices: false
        tags:
          - name: "Name"
            value: "jenkins-slave-T2Micro"

      - ami: "{{ slave_ami_id}}"
        amiType:
          unixData:
            sshPort: "22"
        associatePublicIp: false
        connectBySSHProcess: false
        connectionStrategy: PRIVATE_IP
        deleteRootOnTermination: false
        description: "Jenkins Slave Debian9 Type T2Large"
        ebsOptimized: false
        iamInstanceProfile: "{{slave_instance_profile_arn}}"
        initScript: "mkdir /home/admin/tools"
        idleTerminationMinutes: "30"
        labelString: "ec2 docker debian debian9 large T2Large"
        maxTotalUses: -1
        mode: NORMAL
        monitoring: false
        numExecutors: 10
        remoteAdmin: "admin"
        remoteFS: "/home/admin"
        securityGroups: "{{  slave_security_group_name}}"
        stopOnTerminate: false
        subnetId: "{{ slave_subnet_id }}"
        t2Unlimited: false
        type: T2Large
        useDedicatedTenancy: false
        useEphemeralDevices: false
        tags:
          - name: "Name"
            value: "jenkins-slave-T2Large"

      useInstanceProfileForCredentials: false


